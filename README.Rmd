---
title: "DIDdesign"
output:
  md_document:
    variant: markdown_github
---

# DIDdesign: Double Difference-in-Differences


<!-- badges: start -->
[![R build status](https://github.com/naoki-egami/DIDdesign/workflows/R-CMD-check/badge.svg)](https://github.com/naoki-egami/DIDdesign/actions)
<!-- badges: end -->

Authors:

- [Naoki Egami](https://naokiegami.com/)
- [Soichiro Yamauchi](https://soichiroy.github.io/)


Reference:

- Egami and Yamauchi (2019) "How to Improve the Difference-in-Differences Design with Multiple Pre-treatment Periods."

## Installation Instructions:

- Downloading the most recent version of `DIDdesign` from Github

	```r
	## need to install `devtools` if necessary
	require(devtools)
	install_github("naoki-egami/DIDdesign", dependencies = TRUE)
	```

## The Standard Difference-in-Differences Design


### Panel Data


```{r}
## load package
# require(DIDdesign)

## load data
data(anzia2012)


## estimate treatment effect
set.seed(1234)
fit_panel <- did(
  formula = lnavgsalary_cpi ~ oncycle | teachers_avg_yrs_exper +
                        ami_pc + asian_pc + black_pc + hisp_pc,
  data    = anzia2012,
  id_unit = "district",
  id_time = "year",
  option  = list(n_boot = 200, parallel = TRUE)
)

summary(fit_panel)


## treatment effect on Y_{t+1}
fit_panel_t1 <- did(
  formula = lnavgsalary_cpi ~ oncycle | teachers_avg_yrs_exper +
                        ami_pc + asian_pc + black_pc + hisp_pc,
  data    = anzia2012,
  id_unit = "district",
  id_time = "year",
  option  = list(n_boot = 200, lead = 1, parallel = FALSE)
)

summmary(fit_panel_t1)
```




### Repeated Cross-sectional Data

```{r}
data(malesky2014)

set.seed(1234)
ff_rcs <- did(
 formula = transport ~ treatment + post_treat | factor(city),
 data    = malesky2014,
 id_time = 'year',
 is_panel= FALSE,
 option  = list(n_boot = 20, id_cluster = "tinh", parallel = FALSE)
)

summary(estimates)
```


## Staggered Adoption Design
